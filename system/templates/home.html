{% extends "base.html" %}

{% block title %}首页 - 医院管理系统{% endblock %}

{% block content %}
<div class="card">
    <h2>欢迎使用医院管理系统</h2>
    <p>请选择您的角色以继续：</p>
    
    <form method="POST" action="{{ url_for('home') }}">
        <div class="form-group">
            <label for="role">选择角色：</label>
            <select id="role" name="role" required onchange="toggleUserIdField()">
                <option value="">-- 请选择角色 --</option>
                <option value="registrar">挂号员（挂号收费）</option>
                <option value="doctor">医生</option>
                <option value="admin">管理员（药房/库存）</option>
                <option value="patient">患者</option>
            </select>
        </div>
        
        <div class="form-group" id="user_id_group" style="display: none;">
            <label for="user_id">用户ID（医生角色请输入医生ID）：</label>
            <input type="text" id="user_id" name="user_id" placeholder="请输入您的用户ID">
        </div>
        
        <button type="submit" class="btn btn-primary">继续</button>
    </form>
</div>

<div class="card">
    <h3>系统功能说明</h3>
    <ul>
        <li><strong>挂号员：</strong> 处理患者挂号和收费管理</li>
        <li><strong>医生：</strong> 查看患者队列并提交诊断处方</li>
        <li><strong>管理员：</strong> 监控药品库存和管理药房</li>
        <li><strong>患者：</strong> 查看个人医疗记录和缴费历史</li>
    </ul>
</div>

<script>
    function toggleUserIdField() {
        const role = document.getElementById('role').value;
        const userIdGroup = document.getElementById('user_id_group');
        const userIdInput = document.getElementById('user_id');
        
        if (role === 'doctor') {
            userIdGroup.style.display = 'block';
            userIdInput.required = true;
        } else {
            userIdGroup.style.display = 'none';
            userIdInput.required = false;
        }
    }
</script>
{% endblock %}
